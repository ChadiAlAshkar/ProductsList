!function(e){function t(n){if(i[n])return i[n].exports;var s=i[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var i={};t.m=e,t.c=i,t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}({2:function(e,t){function i(e,t){e&&ui.createElement("div",skeleton,"",["carouselLoad","loadColor"]),ui.createElement("div",skeleton,"",["user-card"]);for(var i=0;i<t;i++){var n="item1Load";e?0!=i&&(n="item2Load"):n="item3Load";var s=ui.createElement("div",skeleton,"",[n,"listViewItem"]),a=ui.createElement("div",s,"",["listViewItemImgContainer"]);ui.createElement("div",a,"",["listViewItemImg","loadColor"]);var o=ui.createElement("div",s,"",["listViewItemCopy","ellipsis","padded","padded--m"]);ui.createElement("div",o,"",["textLoad","loadColor"])}}function n(){var e=this;buildfire.appearance.getAppTheme(function(t,i){if(t)return console.error(t);e.config.appTheme=i,document.getElementsByClassName("icon")[0].style.setProperty("color",i.colors.icons,"important"),document.getElementsByClassName("icon")[1].style.setProperty("color",i.colors.icons,"important");for(var n=0;n<document.getElementsByClassName("loadColor").length;n++)document.getElementsByClassName("loadColor")[n].style.setProperty("background",i.colors.bodyText,"important");coverImg.style.backgroundColor=i.colors.bodyText,profileImg.style.backgroundColor=i.colors.backgroundColor,document.getElementById("searchTxt").style.setProperty("--c",i.colors.bodyText),document.getElementById("itemTitle").style.setProperty("color",i.colors.headerText,"important"),document.getElementById("itemSubTitle").style.setProperty("color",i.colors.headerText,"important")})}function s(){m=null,itemTitle.innerHTML="",itemSubTitle.innerHTML="",main.classList.remove("hidden"),subpage.classList.add("hidden"),wysiwygItemContent.innerHTML="",coverImgBody.src="",profileImgBody.src="",body.scrollTo(0,0)}function a(e){m=e,itemTitle.innerHTML=e.data.title,itemSubTitle.innerHTML=e.data.subTitle,main.classList.add("hidden"),subpage.classList.remove("hidden"),wysiwygItemContent.innerHTML=e.data.description,this.config.fillingCover||(this.config.fillingCover=!0,this.animateImg(coverImgBody,e.data.coverImgUrl,500)),this.config.fillingProfile||(this.config.fillingProfile=!0,this.animateImg(profileImgBody,e.data.profileImgUrl,1e3)),body.scrollTo(0,0)}function o(e,t){buildfire.messaging.sendMessageToControl({openSubItemPage:e,itemClicked:{data:t.data,id:t.id}})}function l(){""==itemTitle.innerHTML&&""==itemSubTitle.innerHTML&&""==wysiwygItemContent.innerHTML&&coverImgBody.src.endsWith("styles/media/holder-16x9.png")&&profileImgBody.src.endsWith("styles/media/holder-1x1.png")?(emptyProds2.classList.remove("hidden"),coverImg.classList.add("hidden"),profileImg.classList.add("hidden"),itemTitle.classList.add("hidden"),itemSubTitle.classList.add("hidden"),wysiwygItemContent.classList.add("hidden")):(emptyProds2.classList.add("hidden"),coverImg.classList.remove("hidden"),profileImg.classList.remove("hidden"),itemTitle.classList.remove("hidden"),itemSubTitle.classList.remove("hidden"),wysiwygItemContent.classList.remove("hidden"))}function d(){var e,t=this,n=this;g.onItemClicked=function(e){a(e),Analytics.trackAction(Analytics.events.PRODUCT_VIEWED),o(!0,m)},mainItems.onscroll=function(e){(n.mainItems.scrollTop+n.mainItems.clientHeight)/n.mainItems.scrollHeight>.8&&t._fetchNextPage()},buildfire.navigation.onBackButtonClick=function(){main.classList.contains("hidden")&&(s(),o(!1,""))},buildfire.messaging.onReceivedMessage=function(e){if(e&&e.id){switch(e.id){case Enum.messageType.profileImg:""==e.data?profileImgBody.src="../../../styles/media/holder-1x1.png":t.config.fillingProfile||(t.config.fillingProfile=!0,t.animateImg(profileImgBody,e.data,1e3));break;case Enum.messageType.coverImg:""==e.data?coverImgBody.src="../../../styles/media/holder-16x9.png":t.config.fillingCover||(t.config.fillingCover=!0,t.animateImg(coverImgBody,e.data,500));break;case Enum.messageType.title:itemTitle.innerHTML=e.data;break;case Enum.messageType.subTitle:itemSubTitle.innerHTML=e.data;break;case Enum.messageType.description:wysiwygItemContent.innerHTML=e.data;break;case Enum.messageType.newItem:main.classList.add("hidden"),subpage.classList.remove("hidden");break;case Enum.messageType.editItem:a(e.itemClicked);break;case Enum.messageType.closeItem:main.classList.contains("hidden")&&s()}l()}},buildfire.datastore.onUpdate(function(e){e.tag==Constants.Collections.PRODUCTS&&(g.clear(),t.config.skipIndex=0,t.config.endReached=!1,n.searchProducts(n.config.defaultSort,"",!1,!1,function(){t.config.fetchingNextPage=!1})),e.tag==Constants.Collections.INTRODUCTION&&(wysiwygContent.innerHTML=e.data.description,c.loadItems(e.data.images),0==g.items.length&&0==e.data.images.length&&""==e.data.description?(listViewContainer.classList.add("hidden"),emptyProds.classList.remove("hidden")):(listViewContainer.classList.remove("hidden"),emptyProds.classList.add("hidden"))),e.tag==Constants.Collections.LANGUAGE+"en-us"&&(n.config.lang=e,searchTxt.setAttribute("placeholder",""!=n.config.lang.data.search.value?n.config.lang.data.search.value:n.config.lang.data.search.defaultValue))}),searchTxt.addEventListener("keyup",function(t){if(clearTimeout(e),""!=searchTxt.value){carousel.classList.contains("hidden")||(u=[],u=g.items),carousel.classList.add("hidden"),wysiwygContent.classList.add("hidden"),skeleton.innerHTML="",i(!1,4),skeleton.classList.remove("hidden");for(var s=0;s<document.getElementsByClassName("loadColor").length;s++)document.getElementsByClassName("loadColor")[s].style.setProperty("background",n.config.appTheme.colors.bodyText,"important");g.clear(),e=setTimeout(function(){n.config.skipIndex=0,n.searchProducts(n.config.defaultSort,searchTxt.value,!0,!0,function(){n.config.fetchingNextPage=!1})},500)}else skeleton.classList.add("hidden"),carousel.classList.remove("hidden"),wysiwygContent.classList.remove("hidden"),g.clear(),g.loadListViewItems(u)})}function r(){var e=this;listViewContainer.classList.remove("listViewContainer");var t={filter:{},sort:{creationDate:-1,title:1},skip:this.config.skipIndex,limit:this.config.limit},i=Introduction.get(),n=Products.search(t),s=Language.get(Constants.Collections.LANGUAGE+"en-us");Promise.all([i,n,s]).then(function(t){u=[],t[1].forEach(function(e){var t=new ListViewItem;t.id=e.id,t.title=e.data.title,t.description=e.data.subTitle,t.imageUrl=e.data.profileImgUrl,t.data=e.data,u.push(t)}),t[1].length<e.config.limit&&(e.config.endReached=!1),c.loadItems(t[0].data.images),wysiwygContent.innerHTML=t[0].data.description,e.config.lang=t[2],searchTxt.setAttribute("placeholder",""!=e.config.lang.data.search.value?e.config.lang.data.search.value:e.config.lang.data.search.defaultValue),g.loadListViewItems(u),0==t[1].length&&0==t[0].data.images.length&&""==t[0].data.description&&(listViewContainer.classList.add("hidden"),emptyProds.classList.remove("hidden")),skeleton.classList.add("hidden"),main.classList.remove("hidden"),carousel.classList.remove("hidden"),wysiwygContent.classList.remove("hidden"),listViewContainer.classList.remove("hidden")})}var c=new buildfire.components.carousel.view(".carousel"),m=null,g=new buildfire.components.listView("listViewContainer",{enableAddButton:!1}),u=[];!function(){i(!0,this.config.skeletonItems),n(),r(),d()}()}});