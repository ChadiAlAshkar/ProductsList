<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <script src="../../../scripts/buildfire.js"></script>
    <script src="../../../scripts/buildfire/services/notifications/pushNotifications.js"></script>
    <script src="../../../scripts/buildfire/services/notifications/localNotifications.js"></script>
    <script src="./common/config/helper.js"></script>
    <script src="./common/config/localnotification.js"></script>

    <link
      href="../../../scripts/owlCarousel/owlCarousel.css"
      rel="stylesheet"
    />

    <!-- JS -->
    <script src="../../../scripts/jquery/jquery-1.11.2.min.js"></script>
    <script src="../../../scripts/owlCarousel/owlCarousel.js"></script>
    <script src="../../../scripts/buildfire/components/carousel/carousel.js"></script>

    <script src="./common/controllers/introduction.js"></script>
    <script src="./common/models/Introduction.js"></script>
  </head>
  <body>
    <div class="carousel"></div>

    <div id="my_container_div"></div>

    <script>
      let viewer = new buildfire.components.carousel.view(".carousel");
      let description = document.getElementById("my_container_div");
      Introduction.get()
        .then((result) => {
          if (result) {
            viewer.loadItems(result.data.images);
            description.innerHTML = result.data.description;
          }
        })
        .catch((err) => {
          console.error("Error in getting Introduction::: ", err);
        });

      buildfire.datastore.onUpdate((response) => {
        if (response.tag == Helper.Collections.PRODUCTS) {
          console.log("Products updated");
        }
        if (response.tag == Helper.Collections.INTRODUCTION) {
          description.innerHTML = response.data.description;
          viewer.loadItems(response.data.images);
        }
      });
    </script>
  </body>
</html>
